This repository is for the computation of functional connectivities (covariance matrices) for patients in the HCP_1200 dataset. There are 1113 patients in the HCP_1200 dataset. A subset of them have at least one (of two possible) fmri scans for the REST1 portion of the dataset. Each available scan is parcelized according to an atlas (Deskian or Destreuix), activity values are averaged in these parcellizations for each time point thus creating a vector observation (each entry corresponds to a brain regions). These observations are then used to compute the overall covariance matrix.


Files with ** are the main files in this repo.


fc_processing/ ==> compute to fcs from the data
    compute_fcs.m
        Script coordinating fc computation for all patients. Saves .mat for each patient with fc's and relavatn metadata
    fmri_to_cov.m **
        Maps a single fmri scan (LR or RL) with its corresponding atlas raw to an fc.  
    sc_fc_dataset.m **
        Create large tensors of fcs, scs, and metadata into a .mat file
    transform_sc.m
        Maps from raw scs to transformed scs via log(raw_edge+1)

misc/ ==> miscellaneos files for visualizing, analysing the data, and testing other scripts
    data_accounting.m **
        Analysis on what data we have for each patients, and which scans are needed
    test_dataset_creation.m
        Ensure data placed into dataset tensors properly by reloading the raw .mat file and comparing
    compare_datasets.m
        Plotting to compare old correlation fcs to new computed correlation fcs
        Outputs jpgs showing comparison for each patient
    inspect_given_scs.m
        Sanity checks on scs
    subject_list_dir_debug.m
        Found repeated subject in subject_list outputed by function in hcp-batch-download repo




Attributions
    Zhengwu Zhang - professor at UNC
    Martin Cole - phd student at UofR
    FieldTrip - use of cifti file reading libary - http://www.fieldtriptoolbox.org
    HCP - human connectome project - http://www.humanconnectome.org



======================================================
implimentation notes:

1)error when running correlation_calculation.,

“ft_getopt.mexmaci64” cannot be opened because the developer cannot be verified.

solution: 
https://www.fieldtriptoolbox.org/faq/mexmaci64_cannot_be_opened_because_the_developer_cannot_be_verified/



2) Atlas indices
-talked with Marty to find indices for Desikan and Destrieux
    -to get indices used for cortical/subcortical brain regions in atlas
        > unique(subjlab.x100206_aparc_a2009s(~isnan(subjlab.x100206_aparc_a2009s)))
    -run code, break point, open subjlab and subj_tdata and look at fields. brain_strcture and brain_structure_label??
    -use setdiff to find missing labels (corpus collosum)
-to confirm check file prrovided by Yang (load_brain_data_FC_SC.m)
    -load file
    -check variable: ChosenROI_cortical and ChosenROI_subcortical

